<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>EJENEX | Hilo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

  <style>
    :root{--bg-1:#040214;--bg-2:#071033;--accent-1:#7c3aed;--accent-2:#22d3ee;--radius:14px;}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',system-ui;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#e6eef6;min-height:100vh;-webkit-font-smoothing: antialiased;line-height:1.45}
    .container{max-width:1100px;margin:0 auto;padding:0 1rem}

    /* ===== NAVBAR (igual que index) ===== */
    .navbar {
      width: 90%;
      max-width: 1100px;
      margin: 20px auto;
      background: linear-gradient(90deg, #6e7480, #5a5f66);
      border-radius: 30px;
      padding: 10px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
    }
    .navbar .logo { color:#fff;font-weight:800;font-size:1rem;display:flex;align-items:center;gap:10px }
    .navbar .menu { display:flex;gap:14px;align-items:center;flex-wrap:wrap }
    .navbar .menu a {
      text-decoration:none;color:#fff;font-size:.95rem;
      padding:6px 12px;border-radius:14px;transition:background .18s ease;
    }
    .navbar .menu a:hover{background:rgba(255,255,255,.08)}
    .navbar .menu .active{
      background:linear-gradient(90deg,#8e2aa6,#7c3aed);
      font-weight:700;
      box-shadow:0 8px 20px rgba(124,58,237,.12)
    }

    /* User menu */
    .user-menu{position:relative}
    .user-btn{
      width:34px;height:34px;border-radius:50%;
      border:0;cursor:pointer;display:flex;align-items:center;justify-content:center;
      background:#f0f0f0;overflow:hidden;
      box-shadow:0 6px 18px rgba(0,0,0,.25);
    }
    .user-fallback{color:#020617;font-weight:800;font-size:.95rem;user-select:none}
    .user-avatar{width:100%;height:100%;object-fit:cover;display:none}
    .user-dropdown{
      position:absolute;right:0;top:44px;min-width:200px;
      background:rgba(18,7,30,.92);
      border:1px solid rgba(255,255,255,.10);
      border-radius:14px;padding:8px;display:none;
      box-shadow:0 18px 50px rgba(0,0,0,.45);
      backdrop-filter:blur(10px);z-index:9999;
    }
    .user-dropdown.open{display:block}
    .user-dropdown .divider{height:1px;background:rgba(255,255,255,.10);margin:6px 6px}
    .user-dropdown a,.user-dropdown button{
      width:100%;display:block;padding:10px 12px;border-radius:10px;
      text-decoration:none;border:0;background:transparent;color:#fff;font-weight:600;
      cursor:pointer;text-align:left;font-family:inherit;
    }
    .user-dropdown a:hover,.user-dropdown button:hover{background:rgba(255,255,255,.08)}

    /* ===== P√°gina ===== */
    .wrap{max-width:920px;margin:0 auto;padding:0 1rem 2rem}
    .card{
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06);
      border-radius:var(--radius);
      padding:1rem;
      box-shadow:0 14px 40px rgba(0,0,0,.30);
    }
    h1{
      font-size:1.55rem;font-weight:900;margin-bottom:.4rem;
      background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    }
    .meta{color:rgba(255,255,255,.72);font-weight:700;font-size:.85rem;margin-bottom:.8rem}
    .body{color:rgba(230,238,246,.90);font-weight:600;white-space:pre-wrap}

    .actions{margin-top:1rem;display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
    .pill{
      display:inline-flex;gap:.35rem;align-items:center;
      padding:.45rem .7rem;border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      color:#fff;font-weight:900;font-size:.85rem;
      cursor:pointer;
      user-select:none;
    }
    .pill:hover{background:rgba(255,255,255,.10)}
    .pill-danger{border-color:rgba(239,68,68,.35);background:rgba(239,68,68,.10)}
    .pill-danger:hover{background:rgba(239,68,68,.16)}

    .section-title{margin:1.2rem 0 .6rem;font-weight:900}
    .comment{
      margin-top:.7rem;
      background:rgba(255,255,255,.02);
      border:1px solid rgba(255,255,255,.06);
      border-radius:14px;
      padding:.85rem;
    }
    .comment .cmeta{color:rgba(255,255,255,.70);font-weight:700;font-size:.82rem;margin-bottom:.35rem}
    .comment .ctext{color:rgba(230,238,246,.9);font-weight:600;white-space:pre-wrap}

    .composer{margin-top:1rem;display:flex;flex-direction:column;gap:.55rem}
    textarea{
      padding:.8rem 1rem;border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      color:#fff;outline:none;min-height:120px;resize:vertical;
    }
    .btn{
      align-self:flex-end;
      padding:.75rem 1.1rem;border-radius:999px;border:0;cursor:pointer;font-weight:900;
      color:#030617;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));
    }

    .loading,.empty{text-align:center;color:rgba(255,255,255,.75);display:none;margin-top:1rem}

    /* Modal reporte */
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:9999;padding:1rem}
    .modal{
      width:min(560px,100%);
      background:rgba(18,7,30,.96);
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px;padding:14px;
      box-shadow:0 22px 70px rgba(0,0,0,.55);
      backdrop-filter:blur(12px);
    }
    .modal h3{margin:6px 0 10px;font-weight:900}
    .modal-actions{display:flex;gap:.6rem;justify-content:flex-end;margin-top:10px}
    .btn-ghost{background:rgba(255,255,255,.08);color:#fff;border:1px solid rgba(255,255,255,.12);padding:.7rem 1rem;border-radius:999px;font-weight:900;cursor:pointer}
  </style>
</head>
<body>

  <!-- Navbar montada por JS -->
  <div id="navbarMount"></div>

  <div class="wrap">
    <article class="card">
      <h1 id="title">Cargando...</h1>
      <div class="meta" id="meta"></div>
      <div class="body" id="body"></div>

      <div class="actions">
        <div class="pill" id="btnVote">üëç <span id="votes">0</span></div>
        <div class="pill pill-danger" id="btnReport">üö© Reportar</div>
      </div>
    </article>

    <div class="section-title">Comentarios</div>
    <div class="loading" id="loading">Cargando comentarios...</div>
    <div id="comments"></div>
    <div class="empty" id="empty">A√∫n no hay comentarios.</div>

    <div class="composer">
      <textarea id="commentText" placeholder="Escribe tu comentario..."></textarea>
      <button class="btn" id="btnSend">Comentar</button>
    </div>
  </div>

  <!-- Modal reporte -->
  <div class="modal-backdrop" id="modalBackdrop">
    <div class="modal">
      <h3>Reportar contenido</h3>
      <textarea id="reportReason" placeholder="Explica el motivo del reporte..."></textarea>
      <div class="modal-actions">
        <button class="btn-ghost" id="btnCancel">Cancelar</button>
        <button class="btn" id="btnSubmitReport">Enviar</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <script type="module">
    import { mountNavbar } from "../../js/modules/ui/navbar.js";
    mountNavbar({
      active: "forums",
      links: {
        home: "./index.html",
        groups: "./index.html",
        forums: "./forums.html"
      },
      loginUrl: "./login.html"
    });
  </script>

  <script type="module" src="../../js/modules/forums/thread.page.js"></script>
</body>
</html>
